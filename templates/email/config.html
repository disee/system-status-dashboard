{% extends "base/base.html" %}

{% comment %}

 Copyright 2013 - Tom Alessi

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and 
 limitations under the License.

{% endcomment %}

{% block content %}
		
<form method="POST" action="/admin/email_config">
{% csrf_token %}

<div class="row">
	{# This is a large-3 side nav #}
	{% include "admin/side_nav.html" %}

	<div class="large-9 columns">

	  <div class="row">
	    <div class="large-12 columns">
	      <h4>Email Configuration</h4>
	      <p>If you plan to notify your users via email, please complete the relevant fields below.</p>
	      <hr>
	    </div>
	  </div>

    {# This is row consisting of 12 columns that will display all messages passed in the request #}
    {% include "admin/messages.html" %}

	  <div class="row">
	    <div class="large-12 columns">
        <span class="radius secondary label">Enable Email Functionality</span><br>
        <div class="sublabel_container"><span class="sublabel">Select the checkbox to enable global email functionality in SSD.  This includes sending notifications/updates about incidents/maintenances and also notifications to staff about incident reports.</span></div>
	    </div>
	  </div>

	  <div class="row">
	    <div class="large-12 columns">
				<label><input type="checkbox" name="enabled" {% if form.enabled.data %}checked{% else %}{% if email_config.0.enabled == 1 %}checked{% endif %}{% endif %} />&nbsp;Enabled</label>
	   		{% if form.enabled.errors %}
				<span class="error">{% for error in form.enabled.errors %}{{error}}<br>{% endfor %}<br></span>
		    {% endif %} 
			</div>
		</div>

		<div class="spacer_medium"></div>
    
	  <div class="row">
	    <div class="large-12 columns">
        <span class="radius secondary label">Email Format</span><br>
        <div class="sublabel_container"><span class="sublabel">Select the format for email messages sent from SSD.</span></div>
	    </div>
	  </div>
		
		<div class="row">
			<div class="large-11 columns {% if form.email_format.errors %}error{% endif %}">
	      <select name="email_format" class="config_email">
	        {% if email_config.0.email_format %}
		        <option value="1" selected="true">html</option>
		        <option value="">text</option>
	        {% else %}
		        <option value="1">html</option>
		        <option value="" selected="true">text</option>
					{% endif %}
	      </select>
		    {% if form.email_format.errors %}
				<span class="error">{% for error in form.email_format.errors %}{{error}}<br>{% endfor %}<br></span>
		    {% endif %}
			</div>
		</div>

		<div class="spacer_medium"></div>

	  <div class="row">
	    <div class="large-12 columns">
        <span class="radius secondary label">From Address</span><br>
        <div class="sublabel_container"><span class="sublabel">Enter the email address that messages from SSD will originate from.</span></div>
	    </div>
	  </div>
			
		<div class="row">
			<div class="large-11 columns {% if form.from_address.errors %}error{% endif %}">
				<input type="text" name="from_address" class="email" placeholder="Enter a valid email address" value="{% if form.from_address.data %}{{form.from_address.data}}{% else %}{{email_config.0.from_address}}{% endif %}" />
		    {% if form.from_address.errors %}
				<span class="error">{% for error in form.from_address.errors %}{{error}}<br>{% endfor %}<br></span>
		    {% endif %} 
			</div>
		</div>

		<div class="spacer_medium"></div>

	  <div class="row">
	    <div class="large-12 columns">
        <span class="radius secondary label">Text Pager Address</span><br>
        <div class="sublabel_container"><span class="sublabel">Enter the email address that alerts sent from SSD will be sent to (this is typically a text pager address).</span></div>
	    </div>
	  </div>
			
		<div class="row">
			<div class="large-11 columns {% if form.text_pager.errors %}error{% endif %}">
				<input type="text" name="text_pager" class="email" placeholder="Enter a valid email address" value="{% if form.text_pager.data %}{{form.text_pager.data}}{% else %}{{email_config.0.text_pager}}{% endif %}" />
		    {% if form.text_pager.errors %}
				<span class="error">{% for error in form.text_pager.errors %}{{error}}<br>{% endfor %}<br></span>
		    {% endif %} 
			</div>
		</div>

		<div class="spacer_medium"></div>

	  <div class="row">
	    <div class="large-12 columns">
        <span class="radius secondary label">Incident Greeting Text</span><br>
        <div class="sublabel_container"><span class="sublabel">Enter the text that will accompany new emails sent out about incidents.</span></div>
	    </div>
	  </div>
			
		<div class="row">
			<div class="large-11 columns {% if form.incident_greeting.errors %}error{% endif %}">
		 		<textarea name="incident_greeting" class="config_email" placeholder="Enter Incident Greeting" maxlength="1000">{% if form.incident_greeting.data %}{{form.incident_greeting.data}}{% else %}{{email_config.0.incident_greeting}}{% endif %}</textarea>
		    {% if form.incident_greeting.errors %}
				<br><span class="error">{% for error in form.incident_greeting.errors %}{{error}}<br>{% endfor %}<br></span>
		    {% endif %} 
			</div>
		</div>

		<div class="spacer_medium"></div>

	  <div class="row">
	    <div class="large-12 columns">
        <span class="radius secondary label">Incident Update Text</span><br>
        <div class="sublabel_container"><span class="sublabel">Enter the text that will accompany update emails sent out about existing incidents.</span></div>
	    </div>
	  </div>
			
		<div class="row">
			<div class="large-11 columns {% if form.incident_update.errors %}error{% endif %}">
		 		<textarea name="incident_update" class="config_email" placeholder="Enter Incident Update" maxlength="1000">{% if form.incident_update.data %}{{form.incident_update.data}}{% else %}{{email_config.0.incident_update}}{% endif %}</textarea>
		    {% if form.incident_update.errors %}
				<br><span class="error">{% for error in form.incident_update.errors %}{{error}}<br>{% endfor %}<br></span>
		    {% endif %} 
			</div>
		</div>

		<div class="spacer_medium"></div>

	  <div class="row">
	    <div class="large-12 columns">
        <span class="radius secondary label">Maintenance Greeting Text</span><br>
        <div class="sublabel_container"><span class="sublabel">Enter the text that will accompany new emails sent out about scheduled maintenance.</span></div>
	    </div>
	  </div>

		<div class="row">
			<div class="large-11 columns {% if form.maintenance_greeting.errors %}error{% endif %}">
		 		<textarea name="maintenance_greeting" class="config_email" placeholder="Enter Maintenance Greeting" maxlength="1000">{% if form.maintenance_greeting.data %}{{form.maintenance_greeting.data}}{% else %}{{email_config.0.maintenance_greeting}}{% endif %}</textarea>
		    {% if form.maintenance_greeting.errors %}
				<br><span class="error">{% for error in form.maintenance_greeting.errors %}{{error}}<br>{% endfor %}<br></span>
		    {% endif %} 
			</div>
		</div>

		<div class="spacer_medium"></div>

	  <div class="row">
	    <div class="large-12 columns">
        <span class="radius secondary label">Maintenance Update Text</span><br>
        <div class="sublabel_container"><span class="sublabel">Enter the text that will accompany update emails sent out about existing scheduled maintenance.</span></div>
	    </div>
	  </div>
		
		<div class="row">
			<div class="large-11 columns {% if form.maintenance_update.errors %}error{% endif %}">
		 		<textarea name="maintenance_update" class="config_email" placeholder="Enter Maintenance Update" maxlength="1000">{% if form.maintenance_update.data %}{{form.maintenance_update.data}}{% else %}{{email_config.0.maintenance_update}}{% endif %}</textarea>
		    {% if form.maintenance_update.errors %}
				<br><span class="error">{% for error in form.maintenance_update.errors %}{{error}}<br>{% endfor %}<br></span>
		    {% endif %} 
			</div>
		</div>

		<div class="spacer_medium"></div>

		<div class="row">
		  <div class="large-11 columns">
		    <input type="submit" class="small button secondary" value="Save"/>
		  </div>
		</div>

		<div class="spacer_medium"></div>
		
	</div>
</div>

</form>

{% endblock %}



